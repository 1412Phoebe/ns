##双因素认证系统##
动态口令是一种安全便捷的帐号防盗技术，可以有效保护交易和登录的认证安全，采用动态口令就无需定期更换密码，安全省心，这是这项技术的一个额外价值，对企事业内部应用尤其有用。
动态令牌即是用来生成动态口令终端。

otp从技术来分有三种形式，时间同步、事件同步、挑战/应答。

- 时间同步
原理是基于动态令牌和动态口令验证服务器的时间比对，基于时间同步的令牌，一般每60秒产生一个新口令，要求服务器能够十分精确的保持正确的时钟，同时对其令牌的晶振频率有严格的要求，这种技术对应的终端是硬件令牌。
- 事件同步
基于事件同步的令牌，其原理是通过某一特定的事件次序及相同的种子值作为输入，通过HASH算法中运算出一致的密码。
- 挑战/应答
常用于的网上业务，在网站/应答上输入服务端下发的挑战码，动态令牌输入该挑战码，通过内置的算法上生成一个6/8位的随机数字，口令一次有效，这种技术目前应用最为普遍，包括刮刮卡、短信密码、动态令牌也有挑战/应答形式。主流的动态令牌技术是时间同步和挑战/应答两种形式。
OTP生成终端主流的有短信密码、动态令牌从终端来分类包含硬件令牌和手机令牌两种，手机令牌是安装在手机上的客户端软件。

目前市场上大多数APP使用短信密码的形式，本系统为了节省成本，利用相似原理，使用邮件的形式下发随机产生的验证码，并将这个验证码存入数据库，并设置一个是否可用字段，获取新的验证码则自动将该用户之前获取的验证码注销。一个验证码的有效期为15分钟。

在IP白名单策略上，我们对于每次用户的登录请求行为做认证，若该请求IP地址从未被此用户使用登录，则将该行为记录进数据库，作为待认证行为。并通过邮件的形式通知用户异常登录行为，用户点击邮件中的链接即可通过认证。该IP下一次的登录请求将被接受。

在用户注册界面中，我们使用基于JS获取脚本生成的验证码，并在后台进行认证，加大安全性。此外，用户注册后系统将自动给用户注册邮箱发送认证邮件，并在处理脚本url后拼接一串token，并在数据库中记录这个token的使用期限，延期则失效。用户点击邮箱中的链接即可完成认证，该用户在数据库中也会被标为已经通过认证。我们将邮箱作为用户唯一认证的标示，不可重复。

多因素认证，在本系统中体现为邮箱、密码+邮件验证码+IP地址白名单。