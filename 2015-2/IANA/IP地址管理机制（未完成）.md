# IP地址管理机制
______
---
***
## 一、IP地址简介
____
* IP地址即互联网协议地址（Internet Protocol Address，IP协议地址），或者网际协议地址。
 * IP协议是TCP/IP协议族中网络层的协议，目前大多数地区采用的是第4个版本，简称IPv4，其地址长度为32位。（IP协议[RFC791](http://datatracker.ietf.org/doc/rfc791/)）

* 随着互联网的迅速发展，IPv4定义的有限地址空间必将不足（2011年已耗尽），由此提出了IPv4的下一个版本IPv6，其地址长度为128位，几乎可以不受限制地为全球提供IP地址。

* IP地址有IP协议提供的一种统一的地址格式， 它为因特网上的每一台主机（或者路由器，或者网络）的每一个接口分配一个在全世界范围内唯一的标识符，也就是逻辑地址，以此屏蔽下层的物理地址。

## 二、IPv4地址
***
* IPv4地址长32 bit二进制数组成，通常以点分十进制法表示为十进制数，总共有2^32-1个地址。如：
	* 10000000.00001010.00000010.00000001
	* 即128.10.2.1

***
### 1、编址

* __1）最基本的编址方法——分类IP__
 * IP地址::={<网络号>，<主机号>}
		* 网络号：用于识别主机所在的网络；
		* 主机号：用于识别该网络中的主机；
 * 寻址时，先寻网络号，再寻主机；
 * 分类的IP地址：
![](http://i.imgur.com/nz51R6r.jpg)

 * 各类地址的地址范围、指派范围和最大主机数：
![](http://i.imgur.com/Q3UB1KW.jpg)
![](http://i.imgur.com/qtT2QdB.png)

 * IP地址管理机构在分配IP地址时，只分配网络号，而得到该网络号的单位可自行分配范围内的主机号。


* __2）改进后的编址方法——划分子网__
 * IP地址::={<网络号>，<子网号>，<主机号>}
 * 寻址时，先寻网络号，再寻子网号，再寻主机号；
 * 子网掩码：将IP地址划分为网络地址和主机地址
	 * 格式：32bit二进制数，与IP地址对应，网络号与子网号全为1，主机号全为0，如255.255.255.0；
 * IP地址的网络地址 = 子网掩码“与”IP地址（逐位相与） = {<网络号>，<子网号>，0}
![](http://i.imgur.com/QHo2BUq.jpg)

 * 未划分子网的网络将使用默认子网掩码。
![](http://i.imgur.com/NHHz4Oz.jpg) 


* __3）目前使用的编址方法——构成超网__
 * IP地址::={<网络前缀>，<主机号>}
 * 消除ABC类地址，不再划分子网，而是自由划分网络前缀（即网络号）和主机号；
 * IP地址的网络地址 = 子网掩码“与”IP地址
	 * 斜线记法："IP地址/前缀所占位数"，如128.14.35.7/20，表示此IP地址的前20位为网络前缀，后12位为主机号；
 * 构成超网：将网络前缀相同的、连续的IP地址组成一个“CIDR”地址块。

（[RFC4632](http://datatracker.ietf.org/doc/rfc4632/)）
***

### 2、保留地址
* 保留地址是IANA在IP地址范围内，保留了一部分地址专门用于内部局域网或测试等有特殊需要之处。

#### 1)特殊IP地址
* 0.0.0.0：表示在本网络上的本主机，所有不清楚的主机和目的网络。可以是源地址，不可以是目的地址。

* 255.255.255.255：表示限制广播地址，只在本网络（同一广播域）上进行广播，各路由器均不转发。不可以是源地址，可以是目的地址。

* 127.0.0.1：表示本地软件回环测试地址。可以是源地址，可以是目的地址。

* D类地址（224.0.0.0~239.255.255.255）：表示组播地址，224.0.0.1特指所有主机，224.0.0.2特指所有路由器，用于组播。

* 169.254.x.x：表示DHCP服务器发生故障或响应超时后，系统分配给主机的地址，此时网络大多不能正常运行。

* 网络号全为0，主机号为host-id：表示本网段上的某个主机host-id。

* 网络号全为1，主机号为host-id：表示所有网络。

* 网络号为net-id，主机号全为1：对网络net-id上的所有主机进行广播。

* 网络号为net-id，主机号全为0：网络net-id。

#### 2）私有地址
在IP地址范围内，划分出一部分地址专门用于内部局域网使用，这部分地址不会出现在公网IP中。


* 目前私有地址为以下四段：
 * A类：10.0.0.0－10.255.255.255
 * A类：100.64.0.0－100.127.255.255（2012年加入，[RFC6598](http://datatracker.ietf.org/doc/rfc6598/)）
 * B类：172.16.0.0－172.31.255.255
 * C类：192.168.0.0－192.168.255.255

***
### 2、分配
目前人们使用的分址方法为无分类编址CIDR（Classless Inter-Domain Routing），没有了A类、B类、C类地址的区分和划分子网的概念，
CIDR将
可惜即便CIDR的使用延迟了IPv4地址用完的日期，但目前的IPv4地址的确已耗尽。
服务提供商（ISP）


***
### 3、管理
* Internet IP地址由NIC（Internet Network Information Center）统一负责全球地址的规划、管理；同时由Inter NIC、APNIC、RIPE等网络信息中心具体负责美国及全球其它地区的IP地址分配。
*　APNIC负责亚太地区，我国申请IP地址要通过APNIC，申请时要考虑申请哪一类的IP地址，然后向国内的代理机构提出。
![](http://i.imgur.com/9lpjRar.gif)

***
### 中国互联网络信息中心cnnic

## 三、IPv6地址
***
IPv6地址为128位二进制数，比IPv4
　　（1）更大的地址空间。新的地址大小是IPv6最大的变化，地址位数由32位增加到128位。
　　（2）增强的选项。提供了IPv4所不具备的新选项，可提供新的设施。
　　（3）支持资源分配。IPv6提供一种机制，允许对网络资源的预分配。
　　（4）对协议扩展的保障，适应底层网络硬件或新的应用。 



