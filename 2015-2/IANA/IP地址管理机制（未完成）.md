# IP地址管理机制
---
***
# IP地址简介
____
* __IP地址__即互联网协议地址（Internet Protocol Address，IP协议地址），或者网际协议地址。
 * IP协议是TCP/IP协议族中网络层的协议，目前大多数地区采用的是第4个版本，简称IPv4，其地址长度为32位。（[RFC791](http://datatracker.ietf.org/doc/rfc791/)）

* 随着互联网的迅速发展，IPv4定义的有限地址空间必将不足（2011年已耗尽），由此提出了IPv4的下一个版本IPv6，其地址长度为128位，几乎可以不受限制地为全球提供IP地址。

* IP地址有IP协议提供的一种统一的地址格式， 它为因特网上的每一台主机（或者路由器，或者网络）的每一个接口分配一个在全世界范围内唯一的标识符，也就是逻辑地址，以此屏蔽下层的物理地址。

## 1、IPv4地址
---
* __IPv4地址__长32 bit二进制数组成，通常以点分十进制法表示为十进制数，总共有2^32-1个地址。如：
	* 10000000.00001010.00000010.00000001
	* 即128.10.2.1

### （1）编址
* __最基本的编址方法——分类IP__
 * IP地址::={<网络号>，<主机号>}
		* 网络号：用于识别主机所在的网络；
		* 主机号：用于识别该网络中的主机；
 * 寻址时，先寻网络号，再寻主机；
 * 分类的IP地址：

	![](http://i.imgur.com/nz51R6r.jpg)

 * 各类地址的地址范围、指派范围和最大主机数：

		![](http://i.imgur.com/Q3UB1KW.jpg)
		![](http://i.imgur.com/qtT2QdB.png)

 * IP地址管理机构在分配IP地址时，只分配网络号，而得到该网络号的单位可自行分配范围内的主机号。


* __改进后的编址方法——划分子网__
 * IP地址::={<网络号>，<子网号>，<主机号>}
 * 寻址时，先寻网络号，再寻子网号，再寻主机号；
 * 子网掩码：将IP地址划分为网络地址和主机地址
	 * 格式：32bit二进制数，与IP地址对应，网络号与子网号全为1，主机号全为0，如255.255.255.0；
 * IP地址的网络地址 = 子网掩码“与”IP地址（逐位相与） = {<网络号>，<子网号>，0}

		![](http://i.imgur.com/QHo2BUq.jpg)

 * 未划分子网的网络将使用默认子网掩码。

		![](http://i.imgur.com/NHHz4Oz.jpg) 


* __目前使用的编址方法——构成超网__
 * IP地址::={<网络前缀>，<主机号>}
 * 消除ABC类地址，不再划分子网，而是自由划分网络前缀（即网络号）和主机号；
 * IP地址的网络地址 = 子网掩码“与”IP地址
	 * 斜线记法："IP地址/前缀所占位数"，如128.14.35.7/20，表示此IP地址的前20位为网络前缀，后12位为主机号；
 * 无分类编址CIDR（Classless Inter-Domain Routing）：即无类别域间路由选择，构成超网。将网络前缀相同的、连续的IP地址组成一个“CIDR”地址块，即将一组较小的网络地址聚合，使其成为一个较大的单一路由表项，从而减少网络中路由表项的数量。（[RFC4632](http://datatracker.ietf.org/doc/rfc4632/)）

		![](http://i.imgur.com/T5iyBOs.gif)

***

### （2）保留地址
__保留地址__是IANA在IP地址范围内，保留了一部分地址专门用于内部局域网或测试等有特殊需要之处。

* __特殊IP地址__
 * 0.0.0.0：表示在本网络上的本主机，所有不清楚的主机和目的网络。可以是源地址，不可以是目的地址。

 * 255.255.255.255：表示限制广播地址，只在本网络（同一广播域）上进行广播，各路由器均不转发。不可以是源地址，可以是目的地址。

 * 127.0.0.1：表示本地软件回环测试地址。可以是源地址，可以是目的地址。

 * D类地址（224.0.0.0~239.255.255.255）：表示组播地址，224.0.0.1特指所有主机，224.0.0.2特指所有路由器，用于组播。

 * 169.254.x.x：表示DHCP服务器发生故障或响应超时后，系统分配给主机的地址，此时网络大多不能正常运行。

 * 网络号全为0，主机号为host-id：表示本网段上的某个主机host-id。

 * 网络号全为1，主机号为host-id：表示所有网络。

 * 网络号为net-id，主机号全为1：对网络net-id上的所有主机进行广播。

 * 网络号为net-id，主机号全为0：网络net-id。

* __私有地址__
 * 私有地址是指在IP地址范围内，划分出一部分地址专门用于内部局域网使用。这部分地址不能出现在公共网络IP中，而是被大量用于如企业等有需要的内部网络中。因为私有地址与外网不能直接连通，所以内部网络中可以随意分配所需IP地址。

 * 当使用私有地址的内部网络在接入外部公网时，需要使用网络地址转换(NAT)，将内部的私有地址翻译成公用合法地址，才能实现内网主机和外网通信。

 * 目前IPv4私有地址为以下四段：
		* A类：10.0.0.0－10.255.255.255
		* A类：100.64.0.0－100.127.255.255（2012年加入，[RFC6598](http://datatracker.ietf.org/doc/rfc6598/)）
		* B类：172.16.0.0－172.31.255.255
		* C类：192.168.0.0－192.168.255.255

 
## 2、IPv6地址
***
### （1）编址

### （2）特殊地址

* 目前人们使用的IPv4分址方法为无分类编址CIDR，可惜即便CIDR的使用延迟了IPv4地址用完的日期，但目前的IPv4地址的确已耗尽。

* IPv6地址为128位二进制数，相比IPv4，主要变化如下：
 * 更大的地址空间。新的地址大小是IPv6最大的变化，地址位数由32位增加到128位。
 * 扩展的地址层次结构
 * 灵活的首部格式
 * 增强的选项。提供了IPv4所不具备的新选项，可提供新的设施。
 * 允许协议继续扩充，适应底层网络硬件或新的应用
 * 支持即插即用，集自动配置
 * 支持资源预分配。IPv6提供一种机制，允许对网络资源的预分配。
 






# IP地址分配管理
---
## 1、总述
___
IANA三大职能之一，便是协调全球IP和自治系统号（Autonomous System Numbers，即AS号），并将它们提供给__地区性互联网注册管理机构（Regional Internet Registries，即RIRs）__。

一般来说，IP地址资源是由IANA分配到各大__地区性互联网注册管理机构（Regional Internet Registries，即RIRs）__，再由RIR提供给Internet服务提供商（ISP），而ISP可以将其所获得的IP地址提供给用户，也可以再提供给下一层的ISP，

IPv4和IPv6的地址一般都是在一个分层的方式分配。用户通过Internet服务提供商（ISP）分配的IP地址。ISP从本地互联网注册获得IP地址分配（LIR）或国家互联网注册机构（NIR），或从他们的适当的区域互联网注册机构（RIR）


## 2、具体5大块
***


## 3、国内申请IP地址流程
---

* Internet IP地址由NIC（Internet Network Information Center）统一负责全球地址的规划、管理；同时由Inter NIC、APNIC、RIPE等网络信息中心具体负责美国及全球其它地区的IP地址分配。

Internet的地址资源分配则交由IANA来分配，最初，IANA将地址分配到ARIN（北美地区）、RIPE（欧洲地区）和APNIC（亚太地区），然后在由这些地区性组织将地址分配给各个服务提供商（ISP）。


，

最初，在IANA下有3个分支机构分别负责欧洲、亚太地区、美国与其他地区的IP地址资源分配与管理：
①RIPE（设在比利时的Réseaux IP Européens)，负责整个欧洲地区的IP地址资源分配与管理；
②APNIC（设在澳大利亚的Asia Pacific Network Information Center），负责亚洲与太平洋地区的IP地址资源分配与管理；
③ARIN（设在美国的American Registry for Internet Numbers) ，负责美国与其他地区的IP地址资源分配与管理。

![](http://i.imgur.com/9lpjRar.gif)


而后随着互联网世界的飞速发展，IANA被负责协调IANA责任范围的非营利机构ICANN(Internet Corporation for Assigned Names and Numbers，互联网名称与数字地址分配机构)掌管。
>The Internet Assigned Numbers Authority (IANA) is the entity that oversees global IP address allocation, DNSroot zone management, and other Internet protocol assignments. It is operated by ICANN. 

ICANN行使IANA的职能，
将IP地址（ IPv4 /IPv6）及 AS 号码分配给地区性互联网注册管理机构Regional Internet Registries (RIRs)

* 目前，IANA划分共有五大地区性互联网注册管理机构RIRs
	![](http://i.imgur.com/IMoAMw6.jpg)
 * AFRINIC非洲地区
 * LACNIC亚太地区
 * ARIN北美地区
 * LACNIC 拉丁美洲和一些加勒比群岛
 * 欧洲网络资讯中心RIPE NCC(Reseaux IP Europeens Network Coordination Center，RIPE NCC) 欧洲、中东和中亚部分地区的区域互联网注册管理机构；


 * 另外，许多国家和地区都成立了自己的域名系统管理机构，负责从前述3个机构获取IP地址资源后在本国或本地区的分配与管理事务。这些国家和地区的域名系统管理机构大多属于半官方或准官方机构。但在实际运作过程中，相关国家或地区的政府至少在业务上对其不加干预，使其成为前述3个机构之一在各该国家或地区的附属机构。如日本的JPNIC和中国的CNNIC均属此种机构。


APNIC负责亚太地区，我国申请IP地址要通过APNIC，申请时要考虑申请哪一类的IP地址，然后向国内的代理机构提出


RIPE NCC成立于2002年，它的成员包括主要的互联网服务提供商(ISP) 、电信组织、以及位于欧洲、中东和中亚部分地区的大型企业。作为世界上最大的5个区域互联网注册管理机构之一， RIPE NCC所执行的任务有：
　　1.分配互联网号码资源(IPv4、IPv6以及AS号码资源)
　　2.注册数据的存储和维护
　　3.提供一个开放的、公开的、可访问的数据库
 

中国互联网络信息中心cnnic



[全球IP分配表](!http://www.iana.org/assignments/as-numbers/as-numbers.xml)


>引用英文网页上的原文
>k




相关网站：

[互联网治理研究中心](http://igr.cnnic.cn/)

[中国互联网络信息中心](http://www.cnnic.cn/)
